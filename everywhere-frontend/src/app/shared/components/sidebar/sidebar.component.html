<!-- Sidebar Component -->
<aside 
  class="fixed left-0 top-0 h-full bg-white shadow-2xl border-r border-gray-200 transition-all duration-300 z-50"
  [class.w-72]="!isCollapsed"
  [class.w-20]="isCollapsed"
>
  <!-- Sidebar Header -->
  <div class="flex items-center justify-between p-6 border-b border-gray-200">
    <div class="flex items-center gap-3" *ngIf="!isCollapsed">
      <div class="w-10 h-10 bg-gradient-to-r from-everywhere-primary to-everywhere-secondary rounded-xl flex items-center justify-center">
        <i class="fas fa-plane text-white text-lg"></i>
      </div>
      <div>
        <h2 class="text-xl font-bold text-gray-800">Everywhere</h2>
        <p class="text-xs text-gray-500 uppercase tracking-wide">Travel System</p>
      </div>
    </div>
    
    <!-- Logo colapsado -->
    <div class="flex items-center justify-center w-10 h-10" *ngIf="isCollapsed">
      <div class="w-8 h-8 bg-gradient-to-r from-everywhere-primary to-everywhere-secondary rounded-lg flex items-center justify-center">
        <i class="fas fa-plane text-white text-sm"></i>
      </div>
    </div>
    
    <button 
      (click)="onToggleSidebar()"
      class="w-8 h-8 rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors"
    >
      <i 
        class="fas text-gray-600"
        [class.fa-chevron-left]="!isCollapsed"
        [class.fa-chevron-right]="isCollapsed"
      ></i>
    </button>
  </div>

  <!-- Navigation Menu -->
  <nav class="flex-1 overflow-y-auto p-4">
    <div class="space-y-2">
      <div *ngFor="let item of menuItems" class="relative">
        <!-- Main Menu Item -->
        <button
          (click)="onItemClick(item)"
          class="w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-200 group relative"
          [class.bg-gradient-to-r]="item.active"
          [class.from-everywhere-primary/10]="item.active"
          [class.to-everywhere-secondary/10]="item.active"
          [class.text-everywhere-primary]="item.active"
          [class.shadow-sm]="item.active"
          [title]="isCollapsed ? item.title : ''"
        >
          <!-- Icon -->
          <div 
            class="w-6 h-6 flex items-center justify-center flex-shrink-0"
            [class.text-everywhere-primary]="item.active"
          >
            <i [class]="item.icon" class="text-lg"></i>
          </div>
          
          <!-- Tooltip for collapsed state -->
          <div 
            *ngIf="isCollapsed"
            class="absolute left-full ml-2 px-3 py-2 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50"
          >
            {{ item.title }}
            <div class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-800 rotate-45"></div>
          </div>
          
          <!-- Title and Badge -->
          <div class="flex-1" *ngIf="!isCollapsed">
            <div class="flex items-center justify-between">
              <span class="font-medium">{{ item.title }}</span>
              
              <!-- Badge -->
              <span 
                *ngIf="item.badge"
                class="px-2 py-1 text-xs font-bold rounded-full"
                [class.bg-everywhere-primary/10]="item.badgeColor === 'red'"
                [class.text-everywhere-primary]="item.badgeColor === 'red'"
                [class.bg-green-100]="item.badgeColor === 'green'"
                [class.text-green-600]="item.badgeColor === 'green'"
                [class.bg-everywhere-blue/10]="item.badgeColor === 'blue'"
                [class.text-everywhere-blue]="item.badgeColor === 'blue'"
                [class.bg-gray-100]="!item.badgeColor"
                [class.text-gray-600]="!item.badgeColor"
              >
                {{ item.badge }}
              </span>
              
              <!-- Expand Arrow -->
              <i 
                *ngIf="item.children && item.children.length > 0"
                class="fas fa-chevron-down text-xs transition-transform duration-200"
                [class.rotate-180]="isExpanded(item.id)"
              ></i>
            </div>
          </div>
        </button>

        <!-- Submenu -->
        <div 
          *ngIf="item.children && item.children.length > 0 && isExpanded(item.id) && !isCollapsed"
          class="ml-6 mt-2 space-y-1 border-l-2 border-gray-100 pl-4"
        >
          <a
            *ngFor="let child of item.children"
            [routerLink]="child.route"
            routerLinkActive="bg-everywhere-primary/10 text-everywhere-primary font-medium"
            class="flex items-center gap-3 px-3 py-2 text-sm text-gray-600 rounded-lg hover:bg-gray-50 transition-colors"
          >
            <i [class]="child.icon" class="text-base"></i>
            <span>{{ child.title }}</span>
            <span 
              *ngIf="child.badge"
              class="ml-auto px-2 py-1 text-xs font-bold rounded-full bg-gray-100 text-gray-600"
            >
              {{ child.badge }}
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar Footer -->
  <div class="p-4 border-t border-gray-200" *ngIf="!isCollapsed">
    <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl">
      <div class="w-8 h-8 bg-gradient-to-r from-everywhere-blue to-everywhere-primary rounded-full flex items-center justify-center">
        <i class="fas fa-user text-white text-sm"></i>
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-medium text-gray-800 truncate">Usuario Admin</p>
        <p class="text-xs text-gray-500">Everywhere Travel</p>
      </div>
      <button class="w-6 h-6 flex items-center justify-center hover:bg-gray-200 rounded-lg transition-colors">
        <i class="fas fa-ellipsis-v text-gray-400 text-xs"></i>
      </button>
    </div>
  </div>
</aside>

<!-- Overlay for mobile -->
<div 
  *ngIf="!isCollapsed"
  class="fixed inset-0 bg-black/20 backdrop-blur-sm lg:hidden z-40"
  (click)="onToggleSidebar()"
></div>
