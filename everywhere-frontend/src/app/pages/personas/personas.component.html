<!-- Layout inspirado en dashboard con diseño moderno -->
<div class="personas-layout">
  <!-- Header principal estilo dashboard -->
  <header class="personas-header">
    <div class="header-content">
      <div class="header-info">
        <h1 class="header-title">
          <i class="fas fa-users header-icon"></i>
          Gestión de Clientes
        </h1>
        <p class="header-subtitle">Administra y organiza toda tu base de clientes de manera eficiente</p>
        
        <!-- Stats cards mejoradas -->
        <div class="stats-grid" *ngIf="!isLoading">
          <div class="stat-card total">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ personas.length }}</div>
              <div class="stat-label">Cliente{{ personas.length === 1 ? '' : 's' }} Total{{ personas.length === 1 ? '' : 'es' }}</div>
            </div>
          </div>
          <div class="stat-card natural">
            <div class="stat-icon">
              <i class="fas fa-user"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ estadisticas.totalNaturales }}</div>
              <div class="stat-label">Persona{{ estadisticas.totalNaturales === 1 ? '' : 's' }} Natural{{ estadisticas.totalNaturales === 1 ? '' : 'es' }}</div>
            </div>
          </div>
          <div class="stat-card juridica">
            <div class="stat-icon">
              <i class="fas fa-building"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">{{ estadisticas.totalJuridicas }}</div>
              <div class="stat-label">Persona{{ estadisticas.totalJuridicas === 1 ? '' : 's' }} Jurídica{{ estadisticas.totalJuridicas === 1 ? '' : 's' }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="header-actions">
        <button 
          class="btn-primary-action" 
          (click)="abrirModalCrearCliente()"
          [disabled]="isLoading">
          <div class="btn-icon">
            <i class="fas fa-plus"></i>
          </div>
          <span class="btn-text">Nuevo Cliente</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="personas-main">
    <!-- Search & Filter Section estilo dashboard -->
    <section class="control-panel">
      <div class="panel-header">
        <h2 class="panel-title">
          <i class="fas fa-filter"></i>
          Filtros y Búsqueda
        </h2>
        <div class="results-summary" *ngIf="!isLoading">
          Mostrando <strong>{{ personasFiltradas.length }}</strong> de <strong>{{ personas.length }}</strong> clientes
        </div>
      </div>
      
      <div class="control-grid">
        <!-- Search Input -->
        <div class="search-group">
          <div class="search-wrapper">
            <i class="fas fa-search search-icon"></i>
            <input 
              type="text" 
              class="search-input" 
              placeholder="Buscar por nombre, documento, email o teléfono..."
              [(ngModel)]="searchQuery"
              (input)="onSearchChange()"
              [disabled]="isLoading">
            <button 
              class="search-clear" 
              *ngIf="searchQuery" 
              (click)="clearSearch()"
              title="Limpiar búsqueda">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        
        <!-- Filter Buttons -->
        <div class="filter-group">
          <div class="filter-pills">
            <button 
              class="filter-pill" 
              [class.active]="filtroTipo === 'todos'"
              (click)="aplicarFiltro('todos')"
              [disabled]="isLoading">
              <i class="fas fa-users"></i>
              <span>Todos</span>
              <div class="pill-badge" *ngIf="!isLoading">{{ personas.length }}</div>
            </button>
            <button 
              class="filter-pill" 
              [class.active]="filtroTipo === 'natural'"
              (click)="aplicarFiltro('natural')"
              [disabled]="isLoading">
              <i class="fas fa-user"></i>
              <span>Naturales</span>
              <div class="pill-badge" *ngIf="!isLoading">{{ estadisticas.totalNaturales }}</div>
            </button>
            <button 
              class="filter-pill" 
              [class.active]="filtroTipo === 'juridica'"
              (click)="aplicarFiltro('juridica')"
              [disabled]="isLoading">
              <i class="fas fa-building"></i>
              <span>Jurídicas</span>
              <div class="pill-badge" *ngIf="!isLoading">{{ estadisticas.totalJuridicas }}</div>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Active Filters Display -->
      <div class="active-filters" *ngIf="searchQuery || filtroTipo !== 'todos'">
        <span class="filters-label">Filtros activos:</span>
        <div class="filter-tags">
          <span class="filter-tag" *ngIf="searchQuery">
            <i class="fas fa-search"></i>
            "{{ searchQuery }}"
            <button (click)="clearSearch()" class="tag-remove">
              <i class="fas fa-times"></i>
            </button>
          </span>
          <span class="filter-tag" *ngIf="filtroTipo !== 'todos'">
            <i class="fas fa-filter"></i>
            {{ getPersonaTypeLabel(filtroTipo) }}
            <button (click)="aplicarFiltro('todos')" class="tag-remove">
              <i class="fas fa-times"></i>
            </button>
          </span>
        </div>
      </div>
    </section>

    <!-- Loading State mejorado estilo dashboard -->
    <div *ngIf="isLoading" class="loading-section">
      <div class="loading-card">
        <div class="loading-animation">
          <div class="loading-spinner"></div>
          <div class="loading-dots">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <h3 class="loading-title">Cargando clientes...</h3>
        <p class="loading-subtitle">Obteniendo la información más actualizada</p>
      </div>
    </div>

    <!-- Data Section estilo dashboard -->
    <section class="data-section" *ngIf="!isLoading">
      <!-- Data Header -->
      <div class="data-header">
        <div class="data-title-group">
          <h2 class="data-title">
            <i class="fas fa-database"></i>
            Base de Datos de Clientes
          </h2>
          <div class="data-meta">
            <span class="data-count">{{ personasFiltradas.length }} registros encontrados</span>
            <div class="view-toggles">
              <button class="view-toggle active" title="Vista de tabla">
                <i class="fas fa-table"></i>
              </button>
              <button class="view-toggle" title="Vista de tarjetas">
                <i class="fas fa-th-large"></i>
              </button>
              <button class="view-toggle" title="Vista de lista">
                <i class="fas fa-list"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="data-actions">
          <button class="action-btn secondary" (click)="refreshData()" title="Actualizar">
            <i class="fas fa-sync-alt"></i>
            <span>Actualizar</span>
          </button>
          <button class="action-btn secondary" (click)="exportarDatos()" title="Exportar">
            <i class="fas fa-download"></i>
            <span>Exportar</span>
          </button>
          <button class="action-btn primary" (click)="abrirModalCrearCliente()">
            <i class="fas fa-plus"></i>
            <span>Nuevo Cliente</span>
          </button>
        </div>
      </div>

      <!-- Bulk Actions Bar -->
      <div class="bulk-actions-bar" *ngIf="selectedItems.length > 0">
        <div class="bulk-info">
          <i class="fas fa-check-circle"></i>
          <span>{{ selectedItems.length }} elemento{{ selectedItems.length === 1 ? '' : 's' }} seleccionado{{ selectedItems.length === 1 ? '' : 's' }}</span>
        </div>
        <div class="bulk-buttons">
          <button class="bulk-btn edit">
            <i class="fas fa-edit"></i>
            Editar masivo
          </button>
          <button class="bulk-btn delete">
            <i class="fas fa-trash"></i>
            Eliminar seleccionados
          </button>
        </div>
      </div>

      <!-- Main Table -->
      <div class="table-container" *ngIf="personasFiltradas.length > 0">
        <div class="table-scroll">
          <table class="modern-table">
            <thead class="table-header">
              <tr>
                <th class="select-col">
                  <label class="modern-checkbox">
                    <input 
                      type="checkbox" 
                      [checked]="allSelected"
                      [indeterminate]="someSelected"
                      (change)="toggleAllSelection()">
                    <span class="checkbox-mark"></span>
                  </label>
                </th>
                
                <th class="sortable-col" (click)="sortBy('tipo')" 
                    [class.sorted-asc]="sortColumn === 'tipo' && sortDirection === 'asc'"
                    [class.sorted-desc]="sortColumn === 'tipo' && sortDirection === 'desc'">
                  <div class="col-header">
                    <span>Tipo</span>
                    <div class="sort-icons">
                      <i class="fas fa-caret-up"></i>
                      <i class="fas fa-caret-down"></i>
                    </div>
                  </div>
                </th>
                
                <th class="sortable-col" (click)="sortBy('nombre')"
                    [class.sorted-asc]="sortColumn === 'nombre' && sortDirection === 'asc'"
                    [class.sorted-desc]="sortColumn === 'nombre' && sortDirection === 'desc'">
                  <div class="col-header">
                    <span>Cliente</span>
                    <div class="sort-icons">
                      <i class="fas fa-caret-up"></i>
                      <i class="fas fa-caret-down"></i>
                    </div>
                  </div>
                </th>
                
                <th class="sortable-col" (click)="sortBy('documento')"
                    [class.sorted-asc]="sortColumn === 'documento' && sortDirection === 'asc'"
                    [class.sorted-desc]="sortColumn === 'documento' && sortDirection === 'desc'">
                  <div class="col-header">
                    <span>Identificación</span>
                    <div class="sort-icons">
                      <i class="fas fa-caret-up"></i>
                      <i class="fas fa-caret-down"></i>
                    </div>
                  </div>
                </th>
                
                <th class="data-col">
                  <span>Contacto</span>
                </th>
                
                <th class="status-col">
                  <span>Estado</span>
                </th>
                
                <th class="actions-col">
                  <span>Acciones</span>
                </th>
              </tr>
            </thead>
            
            <tbody class="table-body">
              <tr 
                *ngFor="let persona of personasFiltradas; trackBy: trackByPersonaId; let i = index" 
                class="table-row"
                [class.selected]="isSelected(persona.id)"
                [class.even]="i % 2 === 0">
                
                <!-- Checkbox -->
                <td class="select-cell">
                  <label class="modern-checkbox">
                    <input 
                      type="checkbox" 
                      [checked]="isSelected(persona.id)"
                      (change)="toggleSelection(persona.id)">
                    <span class="checkbox-mark"></span>
                  </label>
                </td>
                
                <!-- Tipo -->
                <td class="type-cell">
                  <div class="type-badge" [class]="getPersonaTypeClass(persona.tipo)">
                    <div class="badge-icon">
                      <i class="fas" 
                         [class.fa-user]="persona.tipo === 'natural'" 
                         [class.fa-building]="persona.tipo === 'juridica'"></i>
                    </div>
                    <span>{{ getPersonaTypeLabel(persona.tipo) }}</span>
                  </div>
                </td>
                
                <!-- Cliente -->
                <td class="client-cell">
                  <div class="client-profile">
                    <div class="client-avatar">
                      <span>{{ getClientInitials(persona) }}</span>
                    </div>
                    <div class="client-info">
                      <div class="client-name">
                        {{ persona.tipo === 'natural' ? 
                            (persona.nombres + ' ' + persona.apellidos) :
                            persona.razonSocial }}
                      </div>
                      <div class="client-details">
                        <span class="client-id">ID: #{{ persona.id }}</span>
                        <span class="client-badge" *ngIf="isClienteVIP(persona)">
                          <i class="fas fa-crown"></i>
                          VIP
                        </span>
                      </div>
                    </div>
                  </div>
                </td>
                
                <!-- Documento -->
                <td class="document-cell">
                  <div class="document-wrapper">
                    <div class="document-number">{{ persona.documento || persona.ruc }}</div>
                    <div class="document-type">{{ getDocumentType(persona) }}</div>
                  </div>
                </td>
                
                <!-- Contacto -->
                <td class="contact-cell">
                  <div class="contact-list">
                    <div class="contact-item" *ngIf="persona.email">
                      <i class="fas fa-envelope"></i>
                      <span>{{ persona.email }}</span>
                    </div>
                    <div class="contact-item" *ngIf="persona.telefono">
                      <i class="fas fa-phone"></i>
                      <span>{{ persona.telefono }}</span>
                    </div>
                    <div class="contact-empty" *ngIf="!persona.email && !persona.telefono">
                      <span>Sin contacto</span>
                    </div>
                  </div>
                </td>
                
                <!-- Estado -->
                <td class="status-cell">
                  <div class="status-badge active">
                    <span class="status-dot"></span>
                    <span>Activo</span>
                  </div>
                </td>
                
                <!-- Acciones -->
                <td class="actions-cell">
                  <div class="actions-dropdown" [class.open]="showActionMenu === persona.id">
                    <button class="actions-trigger" (click)="toggleActionMenu(persona.id)">
                      <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu">
                      <button class="dropdown-item view" (click)="verPersona(persona)">
                        <i class="fas fa-eye"></i>
                        <span>Ver detalles</span>
                      </button>
                      <button class="dropdown-item edit" (click)="editarPersona(persona)">
                        <i class="fas fa-edit"></i>
                        <span>Editar</span>
                      </button>
                      <button class="dropdown-item duplicate" (click)="duplicarPersona(persona)">
                        <i class="fas fa-copy"></i>
                        <span>Duplicar</span>
                      </button>
                      <div class="dropdown-divider"></div>
                      <button class="dropdown-item delete" (click)="confirmarEliminar(persona)">
                        <i class="fas fa-trash"></i>
                        <span>Eliminar</span>
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Table Footer con paginación -->
        <div class="table-footer">
          <div class="footer-left">
            <div class="rows-selector">
              <span>Mostrar:</span>
              <select class="rows-select" [(ngModel)]="pageSize" (change)="onPageSizeChange()">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
              </select>
              <span>por página</span>
            </div>
          </div>
          
          <div class="footer-center">
            <div class="pagination-info">
              {{ getPageInfo() }}
            </div>
          </div>
          
          <div class="footer-right">
            <div class="pagination-nav">
              <button class="nav-btn" [disabled]="currentPage === 1" (click)="goToPage(1)">
                <i class="fas fa-angle-double-left"></i>
              </button>
              <button class="nav-btn" [disabled]="currentPage === 1" (click)="previousPage()">
                <i class="fas fa-angle-left"></i>
              </button>
              <div class="page-numbers">
                <button 
                  *ngFor="let page of getVisiblePages()" 
                  class="page-btn"
                  [class.active]="page === currentPage"
                  (click)="goToPage(page)">
                  {{ page }}
                </button>
              </div>
              <button class="nav-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">
                <i class="fas fa-angle-right"></i>
              </button>
              <button class="nav-btn" [disabled]="currentPage === totalPages" (click)="goToPage(totalPages)">
                <i class="fas fa-angle-double-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State estilo dashboard -->
      <div class="empty-state" *ngIf="personasFiltradas.length === 0 && !isLoading">
        <div class="empty-illustration">
          <i class="fas fa-users"></i>
        </div>
        <div class="empty-content">
          <h3>No se encontraron clientes</h3>
          <p *ngIf="searchQuery || filtroTipo !== 'todos'">
            Prueba ajustando los filtros o realizando una nueva búsqueda
          </p>
          <p *ngIf="!searchQuery && filtroTipo === 'todos'">
            Comienza agregando tu primer cliente al sistema
          </p>
          <div class="empty-actions">
            <button class="btn-primary-action" (click)="abrirModalCrearCliente()">
              <div class="btn-icon">
                <i class="fas fa-plus"></i>
              </div>
              <span class="btn-text">Crear Primer Cliente</span>
            </button>
            <button class="btn-secondary-action" (click)="clearAllFilters()" *ngIf="searchQuery || filtroTipo !== 'todos'">
              <i class="fas fa-filter"></i>
              <span>Limpiar Filtros</span>
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Modal Crear Cliente con Tabs -->
<div class="modal-overlay" *ngIf="mostrarModalCrearCliente" (click)="cerrarModalCrearCliente()">
  <div class="modal-container large-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ editandoPersona ? 'Editar' : 'Crear Nuevo' }} Cliente</h2>
      <button class="modal-close" (click)="cerrarModalCrearCliente()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <!-- Tabs Navigation -->
    <div class="tabs-navigation">
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'natural'"
        (click)="setActiveTab('natural')">
        <i class="fas fa-user"></i>
        Persona Natural
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'juridica'"
        (click)="setActiveTab('juridica')">
        <i class="fas fa-building"></i>
        Persona Jurídica
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'viajero'"
        (click)="setActiveTab('viajero')">
        <i class="fas fa-plane"></i>
        Viajero Frecuente
      </button>
    </div>

    <div class="modal-body">
      <!-- Tab Content: Persona Natural -->
      <div class="tab-content" *ngIf="activeTab === 'natural'">
        <form [formGroup]="personaNaturalForm" (ngSubmit)="onSubmitNatural()" class="modal-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="nombres">Nombres *</label>
              <input 
                type="text" 
                id="nombres"
                formControlName="nombres"
                class="form-control"
                placeholder="Ingrese los nombres"
                [class.error]="isFieldInvalid(personaNaturalForm, 'nombres')">
              <div class="error-message" *ngIf="isFieldInvalid(personaNaturalForm, 'nombres')">
                {{ getFieldError(personaNaturalForm, 'nombres') }}
              </div>
            </div>
            
            <div class="form-group">
              <label for="apellidos">Apellidos *</label>
              <input 
                type="text" 
                id="apellidos"
                formControlName="apellidos"
                class="form-control"
                placeholder="Ingrese los apellidos"
                [class.error]="isFieldInvalid(personaNaturalForm, 'apellidos')">
              <div class="error-message" *ngIf="isFieldInvalid(personaNaturalForm, 'apellidos')">
                {{ getFieldError(personaNaturalForm, 'apellidos') }}
              </div>
            </div>
            
            <div class="form-group">
              <label for="documento">Documento *</label>
              <input 
                type="text" 
                id="documento"
                formControlName="documento"
                class="form-control"
                placeholder="Número de documento"
                [class.error]="isFieldInvalid(personaNaturalForm, 'documento')">
              <div class="error-message" *ngIf="isFieldInvalid(personaNaturalForm, 'documento')">
                {{ getFieldError(personaNaturalForm, 'documento') }}
              </div>
            </div>
            
            <div class="form-group">
              <label for="categoria">Categoría</label>
              <select 
                id="categoria"
                formControlName="categoria"
                class="form-control">
                <option value="">Seleccionar categoría</option>
                <option value="VIP">VIP</option>
                <option value="PREMIUM">Premium</option>
                <option value="REGULAR">Regular</option>
              </select>
            </div>
          </div>

          <!-- Información de Contacto -->
          <div class="form-section" formGroupName="persona">
            <h3>Información de Contacto</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="telefono">Teléfono *</label>
                <input 
                  type="tel" 
                  id="telefono"
                  formControlName="telefono"
                  class="form-control"
                  placeholder="Número de teléfono"
                  [class.error]="isPersonaFieldInvalid('natural', 'telefono')">
                <div class="error-message" *ngIf="isPersonaFieldInvalid('natural', 'telefono')">
                  {{ getPersonaFieldError('natural', 'telefono') }}
                </div>
              </div>
              
              <div class="form-group">
                <label for="email">Email *</label>
                <input 
                  type="email" 
                  id="email"
                  formControlName="email"
                  class="form-control"
                  placeholder="correo@ejemplo.com"
                  [class.error]="isPersonaFieldInvalid('natural', 'email')">
                <div class="error-message" *ngIf="isPersonaFieldInvalid('natural', 'email')">
                  {{ getPersonaFieldError('natural', 'email') }}
                </div>
              </div>
              
              <div class="form-group full-width">
                <label for="direccion">Dirección *</label>
                <textarea 
                  id="direccion"
                  formControlName="direccion"
                  class="form-control"
                  rows="3"
                  placeholder="Dirección completa"
                  [class.error]="isPersonaFieldInvalid('natural', 'direccion')"></textarea>
                <div class="error-message" *ngIf="isPersonaFieldInvalid('natural', 'direccion')">
                  {{ getPersonaFieldError('natural', 'direccion') }}
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                formControlName="cliente"
                class="form-checkbox">
              <span class="checkmark"></span>
              Es cliente
            </label>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="cerrarModalCrearCliente()">
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="personaNaturalForm.invalid || isSubmitting">
              <span class="spinner-sm" *ngIf="isSubmitting"></span>
              {{ editandoPersona ? 'Actualizar' : 'Guardar' }}
            </button>
          </div>
        </form>
      </div>

      <!-- Tab Content: Persona Jurídica -->
      <div class="tab-content" *ngIf="activeTab === 'juridica'">
        <form [formGroup]="personaJuridicaForm" (ngSubmit)="onSubmitJuridica()" class="modal-form">
          <div class="form-grid">
            <div class="form-group full-width">
              <label for="razonSocial">Razón Social *</label>
              <input 
                type="text" 
                id="razonSocial"
                formControlName="razonSocial"
                class="form-control"
                placeholder="Ingrese la razón social"
                [class.error]="isFieldInvalid(personaJuridicaForm, 'razonSocial')">
              <div class="error-message" *ngIf="isFieldInvalid(personaJuridicaForm, 'razonSocial')">
                {{ getFieldError(personaJuridicaForm, 'razonSocial') }}
              </div>
            </div>
            
            <div class="form-group">
              <label for="ruc">RUC *</label>
              <input 
                type="text" 
                id="ruc"
                formControlName="ruc"
                class="form-control"
                placeholder="Ingrese el RUC"
                [class.error]="isFieldInvalid(personaJuridicaForm, 'ruc')">
              <div class="error-message" *ngIf="isFieldInvalid(personaJuridicaForm, 'ruc')">
                {{ getFieldError(personaJuridicaForm, 'ruc') }}
              </div>
            </div>
          </div>

          <!-- Información de Contacto -->
          <div class="form-section" formGroupName="persona">
            <h3>Información de Contacto</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="telefono-juridica">Teléfono *</label>
                <input 
                  type="tel" 
                  id="telefono-juridica"
                  formControlName="telefono"
                  class="form-control"
                  placeholder="Número de teléfono"
                  [class.error]="isPersonaFieldInvalid('juridica', 'telefono')">
                <div class="error-message" *ngIf="isPersonaFieldInvalid('juridica', 'telefono')">
                  {{ getPersonaFieldError('juridica', 'telefono') }}
                </div>
              </div>
              
              <div class="form-group">
                <label for="email-juridica">Email *</label>
                <input 
                  type="email" 
                  id="email-juridica"
                  formControlName="email"
                  class="form-control"
                  placeholder="correo@empresa.com"
                  [class.error]="isPersonaFieldInvalid('juridica', 'email')">
                <div class="error-message" *ngIf="isPersonaFieldInvalid('juridica', 'email')">
                  {{ getPersonaFieldError('juridica', 'email') }}
                </div>
              </div>
              
              <div class="form-group full-width">
                <label for="direccion-juridica">Dirección *</label>
                <textarea 
                  id="direccion-juridica"
                  formControlName="direccion"
                  class="form-control"
                  rows="3"
                  placeholder="Dirección completa"
                  [class.error]="isPersonaFieldInvalid('juridica', 'direccion')"></textarea>
                <div class="error-message" *ngIf="isPersonaFieldInvalid('juridica', 'direccion')">
                  {{ getPersonaFieldError('juridica', 'direccion') }}
                </div>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="cerrarModalCrearCliente()">
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="personaJuridicaForm.invalid || isSubmitting">
              <span class="spinner-sm" *ngIf="isSubmitting"></span>
              {{ editandoPersona ? 'Actualizar' : 'Guardar' }}
            </button>
          </div>
        </form>
      </div>

      <!-- Tab Content: Viajero Frecuente -->
      <div class="tab-content" *ngIf="activeTab === 'viajero'">
        <form [formGroup]="viajeroForm" (ngSubmit)="onSubmitViajero()" class="modal-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="nombresViajero">Nombres *</label>
              <input 
                type="text" 
                id="nombresViajero"
                formControlName="nombres"
                class="form-control"
                placeholder="Ingrese los nombres">
            </div>
            
            <div class="form-group">
              <label for="apellidosViajero">Apellidos *</label>
              <input 
                type="text" 
                id="apellidosViajero"
                formControlName="apellidos"
                class="form-control"
                placeholder="Ingrese los apellidos">
            </div>
            
            <div class="form-group">
              <label for="documentoViajero">Documento *</label>
              <input 
                type="text" 
                id="documentoViajero"
                formControlName="documento"
                class="form-control"
                placeholder="Número de documento">
            </div>
            
            <div class="form-group">
              <label for="numeroTarjeta">Número de Tarjeta *</label>
              <input 
                type="text" 
                id="numeroTarjeta"
                formControlName="numeroTarjeta"
                class="form-control"
                placeholder="Número de tarjeta frecuente">
            </div>
            
            <div class="form-group">
              <label for="aerolinea">Aerolínea *</label>
              <select 
                id="aerolinea"
                formControlName="aerolinea"
                class="form-control">
                <option value="">Seleccionar aerolínea</option>
                <option value="LATAM">LATAM</option>
                <option value="AVIANCA">Avianca</option>
                <option value="AMERICAN">American Airlines</option>
                <option value="UNITED">United Airlines</option>
                <option value="DELTA">Delta Airlines</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="categoriaViajero">Categoría *</label>
              <select 
                id="categoriaViajero"
                formControlName="categoria"
                class="form-control">
                <option value="">Seleccionar categoría</option>
                <option value="BASICO">Básico</option>
                <option value="PLATA">Plata</option>
                <option value="ORO">Oro</option>
                <option value="PLATINO">Platino</option>
              </select>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="cerrarModalCrearCliente()">
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="viajeroForm.invalid || isSubmitting">
              <span class="spinner-sm" *ngIf="isSubmitting"></span>
              {{ editandoPersona ? 'Actualizar' : 'Guardar' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

